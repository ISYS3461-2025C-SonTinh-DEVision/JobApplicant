server:
  port: ${SERVER_PORT:8443}
  ssl:
    enabled: ${SSL_ENABLED:false}
    key-store: classpath:keystore.p12
    key-store-password: ${SSL_KEYSTORE_PASSWORD:changeit}
    key-store-type: PKCS12
    key-alias: jobapplicant

app:
  frontend:
    base-url: ${FRONTEND_BASE_URL:http://localhost:3000}
  backend:
    base-url: ${BACKEND_BASE_URL:http://localhost:8080}
  job-manager:
    base-url: ${JOB_MANAGER_BASE_URL:http://localhost:8081}
  mail:
    from: ${MAIL_FROM:onboarding@resend.dev}
    from-name: ${MAIL_FROM_NAME:DEVision}
    resend:
      # Resend API Key for HTTP-based email sending
      api-key: ${MAIL_PASSWORD:re_LiDzSkL7_HtCBpf7dvcrRbi3kSDLyMH8P}

cloudinary:
  cloud-name: ${CLOUDINARY_CLOUD_NAME}
  api-key: ${CLOUDINARY_API_KEY}
  api-secret: ${CLOUDINARY_API_SECRET}

spring:
  application:
    name: JobApplicant

  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB
      max-request-size: 200MB
      file-size-threshold: 2KB

  data:
    mongodb:
      uri: ${MONGODB_URI}
      database: JA-DB

    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: 0
      timeout: 60000
      ssl:
        enabled: ${REDIS_SSL_ENABLED:false}
      jedis:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1

  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    properties:
      security:
        protocol: ${KAFKA_SECURITY_PROTOCOL:SASL_SSL}
      sasl:
        mechanism: ${KAFKA_SASL_MECHANISM:PLAIN}
        jaas:
          config: ${KAFKA_SASL_JAAS_CONFIG:}
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      properties:
        spring.json.add.type.headers: false
    consumer:
      group-id: ${KAFKA_CONSUMER_GROUP_ID:job-applicant-search-profile-group-local}
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      properties:
        spring.json.trusted.packages: "*"

jm:
  service:
    url: ${JOB_MANAGER_SERVICE_URL:http://localhost:3000}

  # Google OAuth2 SSO Configuration (Requirement 1.3.1 - Ultimo)
  # Note: Our implementation uses ID Token Flow via OAuth2Service
  # This config provides the client-id for token verification
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - email
              - profile
            redirect-uri: "{baseUrl}/api/auth/oauth2/callback/{registrationId}"
            authorization-grant-type: authorization_code
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/v2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub

# AWS Cognito configuration for system-to-system OAuth2 (client_credentials)
# Used by CognitoJwtVerifier + SystemAuthFilter + CognitoTokenService
cognito:
  region: ${COGNITO_REGION:ap-southeast-2}
  user-pool-id: ${COGNITO_USER_POOL_ID:ap-southeast-2_r9U2ssJAZ}
  client-id: ${COGNITO_CLIENT_ID:3fv3a7qb2eo8r3710vd0s43ma6}
  client-secret: ${COGNITO_CLIENT_SECRET:1pd1tg8f17hhgkm5ja510rnvi5pjthp9i45a3d8p43cf69m1kt9v}
  # Token endpoint URL (your Cognito domain)
  token-url: ${COGNITO_TOKEN_URL:https://ap-southeast-2r9u2ssjaz.auth.ap-southeast-2.amazoncognito.com/oauth2/token}
  # Scope required on the access token for system-to-system calls
  required-scope: ${COGNITO_REQUIRED_SCOPE:default-m2m-resource-server-wti-ej/read}

client:
  id: ccloud-springboot-client-7905b7e9-536d-4b3c-90b7-1cde4850022b
